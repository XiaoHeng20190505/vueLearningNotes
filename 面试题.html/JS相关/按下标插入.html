<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>按下标插入</title>
</head>

<body>
    <script>
        // injectSections(
        //   ['item1', 'item2', 'item3', 'item4', 'item5'],
        //   [
        //     { content: 'section1', index: 0 },
        //     { content: 'section2', index: 2 }
        //   ]
        // ) // => ['section1', 'item1', 'item2', 'section2', 'item3', 'item4', 'item5']

        const injectSections = (items, sections) => {
            /* 需要插入坐标对应数据存放到 map 里面 */
            const sectionsMap = new Map(sections.map(({ index, content }) => [index, content]))
            /* 新建一个数组，然后往里面 push 原来数组的数据 */
            return items.reduce((ret, item, currentIndex) => {
                console.log("index"+currentIndex)
                /* push 的时候先检查 map 里面有没有，有的话先 push map 里面的数据 */
                if (sectionsMap.has(currentIndex)) ret.push(sectionsMap.get(currentIndex))
                /* 再 push 原来的数据 */
                ret.push(item)
                return ret
            }, [])//提供了初始值，ret = [] and item = "item1" and index = 0
        }
        let items = ['item1', 'item2', 'item3', 'item4', 'item5']
        let sections = [
            { content: 'section1', index: 0 },
            { content: 'section2', index: 2 }
        ]

        console.log(injectSections(items, sections))

    </script>
</body>

</html>